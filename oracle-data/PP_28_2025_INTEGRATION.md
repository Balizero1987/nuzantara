# PP Nomor 28 Tahun 2025 - Integration Guide

## ðŸ“‹ Document Information

- **Regulation**: PP (Peraturan Pemerintah) Nomor 28 Tahun 2025
- **File**: `/Users/antonellosiano/Desktop/PP Nomor 28 Tahun 2025.pdf`
- **Size**: 19.90 MB
- **Added**: 2025-11-03 07:20:32
- **Status**: Ready for processing

---

## ðŸŽ¯ Integration Steps

### 1. PDF Text Extraction

The PDF needs to be processed with OCR or text extraction tools:

```bash
# Option 1: Using Python (recommended)
cd /Users/antonellosiano/Desktop/NUZANTARA-FLY
python3 << 'EOF'
import PyPDF2
with open("/Users/antonellosiano/Desktop/PP Nomor 28 Tahun 2025.pdf", 'rb') as f:
    pdf = PyPDF2.PdfReader(f)
    text = ""
    for page in pdf.pages:
        text += page.extract_text()
    
    with open("oracle-data/PP_28_2025_extracted.txt", 'w') as out:
        out.write(text)
    
    print(f"Extracted {len(text)} characters")
EOF

# Option 2: Using pdftotext (if installed)
brew install poppler
pdftotext "/Users/antonellosiano/Desktop/PP Nomor 28 Tahun 2025.pdf" oracle-data/PP_28_2025_extracted.txt

# Option 3: Using online OCR (if scanned images)
# Upload to Google Cloud Vision API or similar
```

### 2. Process for Oracle

Once text is extracted, chunk it for Oracle:

```python
# Process text into chunks
python3 << 'EOF'
import json

with open("oracle-data/PP_28_2025_extracted.txt", 'r') as f:
    full_text = f.read()

# Create chunks (2000 chars each)
chunk_size = 2000
chunks = []
for i in range(0, len(full_text), chunk_size):
    chunk = {
        "id": f"PP_28_2025_chunk_{i//chunk_size}",
        "regulation": "PP 28/2025",
        "content": full_text[i:i+chunk_size],
        "metadata": {
            "type": "legal_regulation",
            "year": 2025,
            "chunk_number": i//chunk_size,
            "domain": "legal"
        }
    }
    chunks.append(chunk)

with open("oracle-data/PP_28_2025_chunks.json", 'w') as f:
    json.dump(chunks, f, indent=2, ensure_ascii=False)

print(f"Created {len(chunks)} chunks")
EOF
```

### 3. Upload to Oracle

```python
# Add to ChromaDB Oracle collection
python3 << 'EOF'
import chromadb
import json
from datetime import datetime

# Load chunks
with open("oracle-data/PP_28_2025_chunks.json", 'r') as f:
    chunks = json.load(f)

# Connect to ChromaDB (Railway)
client = chromadb.HttpClient(
    host="your-railway-host",
    port=8000
)

# Get or create legal collection
collection = client.get_or_create_collection(
    name="legal_documents",
    metadata={"description": "Indonesian Legal Regulations"}
)

# Add documents
for chunk in chunks:
    collection.add(
        documents=[chunk['content']],
        metadatas=[chunk['metadata']],
        ids=[chunk['id']]
    )

print(f"âœ… Added {len(chunks)} chunks to Oracle")
EOF
```

### 4. Update ZANTARA Knowledge

Add reference to legal handler:

```typescript
// In apps/backend-ts/src/handlers/legal/legal-query.ts

const PP_28_2025_CONTEXT = {
  regulation: "PP Nomor 28 Tahun 2025",
  added_date: "2025-11-03T07:20:32.922449",
  status: "active",
  topics: [
    // Add relevant topics after analyzing content
  ]
};

// Add to query context when legal questions asked
```

---

## ðŸ“Š Expected Oracle Structure

```json
{
  "collection": "legal_documents",
  "document_type": "PP",
  "regulation_number": 28,
  "regulation_year": 2025,
  "chunks": [
    {
      "id": "PP_28_2025_chunk_0",
      "content": "Full text content here...",
      "metadata": {
        "type": "legal_regulation",
        "section": "introduction",
        "page": 1
      }
    }
  ],
  "embeddings": "auto-generated by ChromaDB",
  "searchable": true
}
```

---

## ðŸŽ¯ ZANTARA Integration Points

### Legal Domain Handler
- **File**: `apps/backend-ts/src/handlers/legal/legal-query.ts`
- **Action**: Add PP 28/2025 to legal knowledge base

### Tax Domain Handler (if relevant)
- **File**: `apps/backend-ts/src/handlers/tax/tax-query.ts`
- **Action**: Reference PP 28/2025 for tax-related queries

### Business Registration Handler (if relevant)
- **File**: `apps/backend-ts/src/handlers/kbli/kbli-query.ts`
- **Action**: Update business regulation references

---

## ðŸš€ Quick Integration (Automated)

```bash
# Run complete integration
cd /Users/antonellosiano/Desktop/NUZANTARA-FLY
./scripts/integrate-new-regulation.sh "PP Nomor 28 Tahun 2025.pdf"
```

---

## âœ… Verification

After integration, test with ZANTARA:

```bash
# Test query
curl -X POST https://nuzantara-backend.fly.dev/api/v3/zantara/unified \
  -H "Content-Type: application/json" \
  -d '{
    "query": "What does PP 28/2025 say about...?",
    "domain": "legal",
    "mode": "detailed"
  }'
```

---

**Status**: âœ… Metadata prepared, ready for text extraction
**Next Step**: Extract PDF text (see step 1 above)
**Priority**: High (new regulation 2025)
