# SYSTEM OVERVIEW

*Auto-generated by The Scribe on 2025-11-30 11:12:33*

> **Note:** This document is automatically updated. Do not edit manually.

---

## Quick Statistics

- **Total API Routes:** 134
- **Modules:** 156
- **Services:** 38
- **Agents:** 3

---

## API Endpoints Summary

###  (5 endpoints)

**GET:**
- `/api/intel/critical`
- `/api/intel/stats/{collection}`
- `/api/intel/trends`

**POST:**
- `/api/intel/search`
- `/api/intel/store`

### Oracle INGEST (2 endpoints)

**GET:**
- `/api/oracle/collections`

**POST:**
- `/api/oracle/ingest`

### Oracle v5.3 - Ultra Hybrid (8 endpoints)

**GET:**
- `/api/oracle/drive/test`
- `/api/oracle/gemini/test`
- `/api/oracle/health`
- `/api/oracle/personalities`
- `/api/oracle/user/profile/{user_email}`

**POST:**
- `/api/oracle/feedback`
- `/api/oracle/personality/test`
- `/api/oracle/query`

### agentic-functions (16 endpoints)

**GET:**
- `/api/agents/analytics/summary`
- `/api/agents/compliance/alerts`
- `/api/agents/compliance/client/{client_id}`
- `/api/agents/ingestion/status`
- `/api/agents/journey/{journey_id}`
- `/api/agents/journey/{journey_id}/next-steps`
- `/api/agents/knowledge-graph/export`
- `/api/agents/status`

**POST:**
- `/api/agents/compliance/track`
- `/api/agents/ingestion/run`
- `/api/agents/journey/create`
- `/api/agents/journey/{journey_id}/step/{step_id}/complete`
- `/api/agents/knowledge-graph/extract`
- `/api/agents/pricing/calculate`
- `/api/agents/research/autonomous`
- `/api/agents/synthesis/cross-oracle`

### authentication (5 endpoints)

**GET:**
- `/api/auth/check`
- `/api/auth/csrf-token`
- `/api/auth/profile`

**POST:**
- `/api/auth/login`
- `/api/auth/logout`

### autonomous-tier1 (6 endpoints)

**GET:**
- `/api/autonomous-agents/executions`
- `/api/autonomous-agents/executions/{execution_id}`
- `/api/autonomous-agents/status`

**POST:**
- `/api/autonomous-agents/client-value-predictor/run`
- `/api/autonomous-agents/conversation-trainer/run`
- `/api/autonomous-agents/knowledge-graph-builder/run`

### conversations (4 endpoints)

**DELETE:**
- `/api/bali-zero/conversations/clear`

**GET:**
- `/api/bali-zero/conversations/history`
- `/api/bali-zero/conversations/stats`

**POST:**
- `/api/bali-zero/conversations/save`

### crm-clients (8 endpoints)

**DELETE:**
- `/api/crm/clients/{client_id}`

**GET:**
- `/api/crm/clients/`
- `/api/crm/clients/by-email/{email}`
- `/api/crm/clients/stats/overview`
- `/api/crm/clients/{client_id}`
- `/api/crm/clients/{client_id}/summary`

**PATCH:**
- `/api/crm/clients/{client_id}`

**POST:**
- `/api/crm/clients/`

### crm-interactions (8 endpoints)

**GET:**
- `/api/crm/interactions/`
- `/api/crm/interactions/client/{client_id}/timeline`
- `/api/crm/interactions/practice/{practice_id}/history`
- `/api/crm/interactions/stats/overview`
- `/api/crm/interactions/{interaction_id}`

**POST:**
- `/api/crm/interactions/`
- `/api/crm/interactions/from-conversation`
- `/api/crm/interactions/sync-gmail`

### crm-practices (8 endpoints)

**GET:**
- `/api/crm/practices/`
- `/api/crm/practices/active`
- `/api/crm/practices/renewals/upcoming`
- `/api/crm/practices/stats/overview`
- `/api/crm/practices/{practice_id}`

**PATCH:**
- `/api/crm/practices/{practice_id}`

**POST:**
- `/api/crm/practices/`
- `/api/crm/practices/{practice_id}/documents/add`

### crm-shared-memory (4 endpoints)

**GET:**
- `/api/crm/shared-memory/client/{client_id}/full-context`
- `/api/crm/shared-memory/search`
- `/api/crm/shared-memory/team-overview`
- `/api/crm/shared-memory/upcoming-renewals`

### handlers (3 endpoints)

**GET:**
- `/api/handlers/category/{category}`
- `/api/handlers/list`
- `/api/handlers/search`

### health (2 endpoints)

**GET:**
- `/health`
- `/health/`

### identity (5 endpoints)

**GET:**
- `/team/debug-auth`

**POST:**
- `/team/login`
- `/team/reset-admin`
- `/team/run-migration-010`
- `/team/seed-team`

### image (1 endpoints)

**POST:**
- `/api/v1/image/generate`

### ingestion (4 endpoints)

**GET:**
- `/api/ingest/stats`

**POST:**
- `/api/ingest/batch`
- `/api/ingest/file`
- `/api/ingest/upload`

### instagram (2 endpoints)

**GET:**
- `/webhook/instagram`

**POST:**
- `/webhook/instagram`

### knowledge (2 endpoints)

**GET:**
- `/api/search/health`

**POST:**
- `/api/search/`

### media (1 endpoints)

**POST:**
- `/media/generate-image`

### memory (8 endpoints)

**DELETE:**
- `/api/memory/{memory_id}`

**GET:**
- `/api/memory/health`
- `/api/memory/stats`

**POST:**
- `/api/memory/embed`
- `/api/memory/init`
- `/api/memory/search`
- `/api/memory/similar`
- `/api/memory/store`

### notifications (5 endpoints)

**GET:**
- `/api/notifications/status`
- `/api/notifications/templates`

**POST:**
- `/api/notifications/send`
- `/api/notifications/send-template`
- `/api/notifications/test`

### plugins (10 endpoints)

**GET:**
- `/api/plugins/health`
- `/api/plugins/list`
- `/api/plugins/metrics/all`
- `/api/plugins/statistics`
- `/api/plugins/tools/anthropic`
- `/api/plugins/{plugin_name}`
- `/api/plugins/{plugin_name}/metrics`

**POST:**
- `/api/plugins/search`
- `/api/plugins/{plugin_name}/execute`
- `/api/plugins/{plugin_name}/reload`

### productivity (4 endpoints)

**GET:**
- `/api/productivity/calendar/events`
- `/api/productivity/drive/search`

**POST:**
- `/api/productivity/calendar/schedule`
- `/api/productivity/gmail/draft`

### search (2 endpoints)

**GET:**
- `/api/search/health`

**POST:**
- `/api/search/`

### team-activity (9 endpoints)

**GET:**
- `/api/team/activity/monthly`
- `/api/team/activity/weekly`
- `/api/team/export`
- `/api/team/health`
- `/api/team/hours`
- `/api/team/my-status`
- `/api/team/status`

**POST:**
- `/api/team/clock-in`
- `/api/team/clock-out`

### whatsapp (2 endpoints)

**GET:**
- `/webhook/whatsapp`

**POST:**
- `/webhook/whatsapp`

---

## Key Modules

### `app.main_cloud`

FastAPI entrypoint for the ZANTARA RAG backend.

Responsibilities:
* Initialize shared services (SearchService, ZantaraAI, ToolExecutor)
* Mount all API routers
* Expose streaming endpoint (/bali-zero...

### `app.metrics`

Enhanced Prometheus Metrics for ZANTARA-PERFECT-100
Provides detailed system monitoring and performance tracking

### `core.cache`

Redis Caching Layer for ZANTARA
Provides intelligent caching for expensive operations

Features:
- TTL-based expiration
- Automatic key generation
- Cache invalidation
- Hit/miss metrics

### `core.chunker`

ZANTARA RAG - Text Chunking
Semantic text splitting for optimal RAG performance

### `core.embeddings`

ZANTARA RAG - Embeddings Generation
Supports both OpenAI and Sentence Transformers

### `core.embeddings_local`

ZANTARA RAG - Local Embeddings with Sentence Transformers
FREE, no API key needed, runs locally

### `core.parsers`

ZANTARA RAG - Document Parsers
Extract text from PDF and EPUB files

### `core.plugins.executor`

Plugin Executor

Executes plugins with performance monitoring, caching, rate limiting, and error handling.

### `core.plugins.plugin`

Core Plugin Base Classes

Defines the base plugin interface that all ZANTARA plugins must implement.

### `core.plugins.registry`

Plugin Registry

Central registry for all plugins. Handles loading, discovery, versioning, and lifecycle.

### `core.qdrant_db`

ZANTARA RAG - Vector Database (Qdrant)
Qdrant client wrapper for embeddings storage and retrieval

### `llm.zantara_ai_client`

ZANTARA AI Client - Primary engine for all conversational AI

AI engine is fully configurable via environment variables:
- ZANTARA_AI_MODEL: Model identifier (default: meta-llama/llama-4-scout)
- OPEN...

### `middleware.error_monitoring`

Error Monitoring Middleware
Captures 4xx/5xx HTTP errors and sends alerts

### `middleware.hybrid_auth`

Hybrid Authentication Middleware - Fail-Closed Implementation
Combines API Key and JWT authentication for flexible access control with security-first approach

### `middleware.rate_limiter`

Rate Limiting Middleware for ZANTARA
Prevents API abuse and ensures fair usage

Features:
- IP-based rate limiting
- User-based rate limiting
- Configurable limits per endpoint
- Redis-backed for dist...

### `migrations.001_fix_missing_tables`

Migration: Fix missing PostgreSQL tables
Date: 2025-10-19
Purpose: Create cultural_knowledge, query_clusters tables and fix memory_facts.id

### `migrations.README_migrations`

Apply database migrations
Use this script when psql is not available locally
Migrations will be applied on Fly.io deployment

### `migrations.apply_migration_010`

One-time script to apply migration 010 via Fly.io or local
Migration: Fix team_members schema alignment

### `migrations.migrate_crm_schema`

Apply CRM System Schema Migration
Connects to Fly.io PostgreSQL and applies migration 007

### `populate_inline`

Minimal Oracle population script - run in Fly.io shell

---

*Last updated: 2025-11-30 11:12:33*

For detailed documentation, see [LIVING_ARCHITECTURE.md](./LIVING_ARCHITECTURE.md)