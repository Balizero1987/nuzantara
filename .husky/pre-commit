#!/usr/bin/env sh

echo "ðŸ” Pre-commit checks..."

# Esegue lint-staged (che include ESLint e Prettier)
npx lint-staged

# Quick typecheck (solo errori, non blocca se ci sono warning)
echo "ðŸ“ Quick typecheck..."
TS_ERRORS=$(npm run typecheck 2>&1 | grep -c "error TS" || echo "0")
if [ "$TS_ERRORS" -gt 300 ]; then
  echo "âš ï¸  Found $TS_ERRORS TypeScript errors"
  npm run typecheck 2>&1 | grep "error TS" | head -5
  echo "ðŸ’¡ Run 'npm run typecheck' for full details"
  exit 1
fi

echo "âœ… Pre-commit checks passed!"
