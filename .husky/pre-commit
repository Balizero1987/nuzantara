#!/bin/bash

echo "Running pre-commit checks..."

# Use lint-staged to only lint changed files (prevents OOM)
# lint-staged is configured in package.json to handle ESLint and Prettier
npm run pre-commit || {
  echo "❌ Lint-staged failed"
  exit 1
}

# Run type checking (only checks TypeScript files, should be fast)
npm run typecheck || {
  echo "❌ Type checking failed"
  exit 1
}

# Run unit tests (fast, only changed files)
npm run test -- --onlyChanged --passWithNoTests || {
  echo "❌ Tests failed"
  exit 1
}

echo "✅ Pre-commit checks passed"

