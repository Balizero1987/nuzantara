/* ZANTARA v3 - UX FIXES FINAL
 * Created: 2025-01-06
 * FIXES CRITICI:
 * - Sfondo immobile
 * - Chat scrollabile
 * - NO doppio movimento
 * - Colori MATTI e RIPOSANTI
 * - Bottom coerente
 */

/* ========================================
   1. SFONDO COMPLETAMENTE FISSO
   ======================================== */
body {
  background: #000 !important;
  background-attachment: fixed !important;
  overflow: hidden !important;
  position: fixed !important;
  width: 100% !important;
  height: 100vh !important;
}

body::before,
body::after {
  position: fixed !important;
  background-attachment: fixed !important;
  animation: none !important;
}

/* ========================================
   2. CONTAINER SCROLLABILE - SOLO CHAT
   ======================================== */
.chat-container {
  height: calc(100vh - 80px) !important;
  overflow-y: auto !important;
  overflow-x: hidden !important;
  scroll-behavior: smooth !important;
  position: relative !important;
  scrollbar-gutter: stable !important;
}

/* Scrollbar IMMOBILE e elegante */
.chat-container::-webkit-scrollbar {
  width: 8px;
}

.chat-container::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.3);
}

.chat-container::-webkit-scrollbar-thumb {
  background: rgba(191, 170, 126, 0.4);
  border-radius: 0;
  border-left: 1px solid rgba(191, 170, 126, 0.2);
}

.chat-container::-webkit-scrollbar-thumb:hover {
  background: rgba(191, 170, 126, 0.6);
}

/* ========================================
   3. NO DOPPIO MOVIMENTO - SOLO ORIZZONTALE
   ======================================== */
.message,
.message-assistant,
.message-user,
.message * {
  transform: none !important;
  transition: none !important;
  animation: none !important;
}

/* ========================================
   4. COLORI MATTI E RIPOSANTI
   ======================================== */

/* Message ZANTARA (AI) - Grigio scuro matto */
.message-assistant .message-content,
.message.message-assistant > div:last-child {
  background: rgba(18, 18, 28, 0.7) !important;
  border: 1px solid rgba(191, 170, 126, 0.12) !important;
  color: rgba(230, 230, 235, 0.88) !important;
}

/* Message USER - Grigio-blu matto */
.message-user .message-content,
.message.message-user > div:last-child {
  background: rgba(22, 22, 35, 0.65) !important;
  border: 1px solid rgba(80, 100, 130, 0.18) !important;
  color: rgba(235, 235, 240, 0.92) !important;
}

/* Text generale pi√π soft */
.message-content {
  color: rgba(230, 230, 235, 0.88) !important;
}

/* Strong text in messages */
.message-content strong {
  color: rgba(191, 170, 126, 0.95) !important;
  font-weight: 600 !important;
}

/* ========================================
   5. BOTTOM COERENTE - Gradient nero
   ======================================== */
.input-box {
  position: sticky !important;
  bottom: 0 !important;
  background: linear-gradient(
    to top,
    rgba(0, 0, 0, 1) 0%,
    rgba(0, 0, 0, 0.98) 60%,
    rgba(0, 0, 0, 0.95) 100%
  ) !important;
  backdrop-filter: blur(12px) !important;
  border-top: 1px solid rgba(191, 170, 126, 0.12) !important;
  box-shadow:
    0 -15px 35px -10px rgba(0, 0, 0, 0.9),
    0 -3px 12px rgba(0, 0, 0, 0.6) !important;
  z-index: 50 !important;
}

/* ========================================
   6. HEADER COERENTE - Gradient nero
   ======================================== */
.header {
  position: sticky !important;
  top: 0 !important;
  background: linear-gradient(
    to bottom,
    rgba(0, 0, 0, 1) 0%,
    rgba(0, 0, 0, 0.98) 60%,
    rgba(0, 0, 0, 0.95) 100%
  ) !important;
  backdrop-filter: blur(12px) !important;
  border-bottom: 1px solid rgba(191, 170, 126, 0.12) !important;
  box-shadow:
    0 15px 35px -10px rgba(0, 0, 0, 0.9),
    0 3px 12px rgba(0, 0, 0, 0.6) !important;
  z-index: 100 !important;
}

/* ========================================
   7. SIDEBAR FISSO
   ======================================== */
.sidebar {
  position: fixed !important;
  overflow-y: auto !important;
  height: calc(100vh - 80px) !important;
}

.sidebar::-webkit-scrollbar {
  width: 6px;
}

.sidebar::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.2);
}

.sidebar::-webkit-scrollbar-thumb {
  background: rgba(191, 170, 126, 0.25);
  border-radius: 3px;
}

/* ========================================
   8. LAYOUT STABILE - No jumping
   ======================================== */
.messages-container {
  padding-bottom: 24px !important;
  min-height: calc(100vh - 250px) !important;
}

.message {
  margin-bottom: 16px !important;
  contain: layout !important;
}

/* ========================================
   9. RESPONSIVE
   ======================================== */
@media (max-width: 768px) {
  body {
    position: fixed;
    overflow: hidden;
  }

  .chat-container {
    height: 100vh;
    height: 100dvh;
  }

  .sidebar {
    height: 100vh;
    height: 100dvh;
  }
}

/* ========================================
   10. ACCESSIBILITY
   ======================================== */
@media (prefers-reduced-motion: reduce) {
  .chat-container {
    scroll-behavior: auto !important;
  }

  * {
    animation-duration: 0.01ms !important;
    transition-duration: 0.01ms !important;
  }
}
