################################################################################
# NUZANTARA RAG BACKEND - SAFE CONFIGURATION
# ✅ SOLO AUTONOMOUS RESEARCH SERVICE ATTIVO
################################################################################
#
# Questo file configura il backend RAG per SOLO agenti sicuri:
# - Autonomous Research Service (ricerca iterativa)
# - Query Router (routing intelligente)
# - Search Service (ricerca base)
#
# ❌ AGENTI PERICOLOSI DISABILITATI:
# - Conversation Trainer (modifica prompt)
# - Client Value Predictor (invia WhatsApp)
# - Compliance Monitor (invia alert)
#
################################################################################

#------------------------------------------------------------------------------
# SERVER CONFIGURATION
#------------------------------------------------------------------------------
PORT=8000
HOST=0.0.0.0
LOG_LEVEL=INFO

#------------------------------------------------------------------------------
# DATABASE
#------------------------------------------------------------------------------
# ⚠️ AGGIORNA CON I TUOI VALORI REALI
DATABASE_URL=postgresql://user:password@host:port/dbname

#------------------------------------------------------------------------------
# REDIS
#------------------------------------------------------------------------------
# ⚠️ AGGIORNA CON I TUOI VALORI REALI
REDIS_URL=redis://default:password@host:port

#------------------------------------------------------------------------------
# CHROMADB (NECESSARIO PER AUTONOMOUS RESEARCH)
#------------------------------------------------------------------------------
# ⚠️ Assicurati che ChromaDB sia running
CHROMA_DB_PATH=/data/chroma_db
CHROMA_HOST=localhost
CHROMA_PORT=8001

#------------------------------------------------------------------------------
# AI MODELS (PER AUTONOMOUS RESEARCH)
#------------------------------------------------------------------------------
# ⚠️ AGGIORNA CON LA TUA API KEY
# Necessaria per Autonomous Research Service (ricerca iterativa)
ANTHROPIC_API_KEY=your-anthropic-api-key

# OpenAI (per embeddings - opzionale se usi altro provider)
# OPENAI_API_KEY=your-openai-api-key

#------------------------------------------------------------------------------
# EMBEDDING CONFIGURATION
#------------------------------------------------------------------------------
EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIMENSION=1536
RERANKER_ENABLED=false

################################################################################
# ❌ DANGEROUS AGENTS (DISABILITATI)
################################################################################
#
# I seguenti agenti sono DISABILITATI.
# NON decommentare senza supervisione umana!
#

#------------------------------------------------------------------------------
# ❌ CONVERSATION TRAINER (DISABILITATO)
#------------------------------------------------------------------------------
# Modifica prompt di sistema - PERICOLOSO
# GITHUB_TOKEN=ghp_xxxxx

#------------------------------------------------------------------------------
# ❌ CLIENT VALUE PREDICTOR (DISABILITATO)
#------------------------------------------------------------------------------
# Invia WhatsApp ai clienti - ESTREMAMENTE PERICOLOSO
# TWILIO_ACCOUNT_SID=ACxxxxx
# TWILIO_AUTH_TOKEN=xxxxx
# TWILIO_WHATSAPP_NUMBER=+14155238886

#------------------------------------------------------------------------------
# ❌ SLACK NOTIFICATIONS (DISABILITATO)
#------------------------------------------------------------------------------
# Abilita solo se vuoi notifiche interne (non client)
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/xxxxx

################################################################################
# USAGE
################################################################################
#
# 1. Copia questo file:
#    cp .env.safe .env
#
# 2. Aggiorna i valori:
#    - DATABASE_URL
#    - REDIS_URL
#    - ANTHROPIC_API_KEY
#    - Verifica CHROMA_HOST e CHROMA_PORT
#
# 3. Avvia ChromaDB (se non già running):
#    docker run -d -p 8001:8000 chromadb/chroma
#
# 4. Avvia il backend RAG:
#    python -m uvicorn backend.main:app --reload --host 0.0.0.0 --port 8000
#
# 5. Testa Autonomous Research:
#    curl -X POST http://localhost:8000/api/research/autonomous \
#      -H "Content-Type: application/json" \
#      -d '{"query": "Come aprire PT PMA?", "max_iterations": 5}'
#
# 6. Verifica collections:
#    curl http://localhost:8001/api/v1/collections
#
################################################################################

################################################################################
# SAFE MODE CHECKLIST
################################################################################
# ✅ Autonomous Research Service attivo (on-demand)
# ✅ Query Router attivo
# ✅ Search Service attivo
# ✅ ChromaDB configurato
# ❌ Conversation Trainer DISABILITATO
# ❌ Client Value Predictor DISABILITATO
# ❌ Knowledge Graph Builder DISABILITATO (medio rischio)
# ❌ Compliance Monitor DISABILITATO
# ❌ Auto Ingestion DISABILITATO (medio rischio)
# ❌ Client Journey DISABILITATO (medio rischio)
################################################################################
