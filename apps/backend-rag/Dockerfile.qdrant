FROM qdrant/qdrant:v1.7.0

# Healthcheck
HEALTHCHECK --interval=30s --timeout=10s --start-period=40s --retries=3 \
  CMD wget --no-verbose --tries=1 --spider http://localhost:6333/healthz || exit 1

# Expose ports
EXPOSE 6333 6334

# Default config (Fly.io volume mounted at /qdrant/storage)
ENV QDRANT__STORAGE__STORAGE_PATH=/qdrant/storage
ENV QDRANT__SERVICE__HTTP_PORT=6333
ENV QDRANT__SERVICE__GRPC_PORT=6334

CMD ["./qdrant"]
