# Cursor Test Automation System

**Generated by**: Claude Code (AGENTE 1-4)
**Date**: 2025-10-26
**Purpose**: Automate test generation for 80 handlers using Cursor AI

---

## 🎯 Quick Start

### Step 1: Review the Orchestrator
```bash
open /tmp/cursor_automation/ORCHESTRATOR.md
```

### Step 2: Start with Priority Tests
```bash
cat /tmp/cursor_automation/prompts/01_example-modern-handler.md
```
Copy the prompt content and paste it in Cursor's AI chat.

### Step 3: Verify Tests
```bash
cd /Users/antonellosiano/Desktop/NUZANTARA-RAILWAY
npm test -- example-modern-handler.test
```

### Step 4: Continue with Remaining Prompts
Process prompts 02-68 in sequence.

---

## 📊 System Components

### 1. **Prompts** (`/prompts/`)
68 ready-to-use prompts for Cursor AI:
- **01-05**: Priority handlers (start here!)
- **06-55**: New test generation
- **56-66**: Enhance existing tests
- **67-68**: Verification and reporting

### 2. **Scripts** (`/scripts/`)
Automated verification tools:
- `verify_tests.sh` - Full verification
- `check_coverage.sh` - Module coverage
- `quick_test.sh` - Single test runner
- `generate_report.py` - Detailed reporting

### 3. **Reports** (`/reports/`)
Generated reports and data:
- `analysis.json` - Initial code analysis
- `verification_summary_*.md` - Test results
- `coverage_*.json` - Coverage data
- `detailed_coverage_report.md` - Final report

---

## 🔧 Usage Examples

### Run Full Verification
```bash
/tmp/cursor_automation/scripts/verify_tests.sh
```

### Check Coverage by Module
```bash
/tmp/cursor_automation/scripts/check_coverage.sh
```

### Test Single Handler
```bash
/tmp/cursor_automation/scripts/quick_test.sh oracle
```

### Generate Detailed Report
```bash
python3 /tmp/cursor_automation/scripts/generate_report.py
```

---

## 📈 Progress Tracking

### Initial State
- 80 handlers total
- 12 handlers with tests (15%)
- 68 handlers without tests

### Target State
- 80 handlers total
- 80 handlers with tests (100%)
- 80%+ test coverage overall

### Current Progress
Check status with:
```bash
/tmp/cursor_automation/scripts/check_coverage.sh
```

---

## 🛠️ Troubleshooting

### Tests Not Found
```bash
# Check if test files exist
find /Users/antonellosiano/Desktop/NUZANTARA-RAILWAY/src/handlers -name "*.test.ts"
```

### Import Errors
- Always use `.js` extension in imports (even for `.ts` source files)
- Example: `await import('../handler.js')`

### Mock Errors
- Ensure `jest.mock()` is called BEFORE any imports
- Follow the exact mock structure in prompts

### Coverage Low
- Review the specific test file
- Check if all functions are tested
- Ensure error cases are covered

---

## 📁 Full Directory Structure

```
/tmp/cursor_automation/
├── ORCHESTRATOR.md              # Main execution guide
├── README.md                    # This file
├── prompts/
│   ├── 01_example-modern-handler.md
│   ├── 02_bali-zero-oracle.md
│   ├── ...
│   ├── 67_BATCH_RUN_ALL.md
│   └── 68_FINAL_REPORT.md
├── scripts/
│   ├── verify_tests.sh
│   ├── check_coverage.sh
│   ├── quick_test.sh
│   └── generate_report.py
└── reports/
    ├── analysis.json
    └── (generated reports here)
```

---

## 🎓 How It Works

### AGENTE 1: Code Analysis
Analyzed all 80 handlers and identified:
- Which handlers have tests
- Which handlers need tests
- Priority order for test generation

### AGENTE 2: Prompt Generation
Created 68 detailed prompts for Cursor AI:
- Each prompt contains exact specifications
- Mock strategies included
- Target coverage defined
- Test patterns provided

### AGENTE 3: Verification Scripts
Built automated verification tools:
- Test execution monitoring
- Coverage calculation
- Progress tracking
- Report generation

### AGENTE 4: Orchestration
Assembled everything into a complete workflow:
- Execution phases defined
- Best practices documented
- Troubleshooting guide included
- Success metrics established

---

## 🚀 Next Steps

1. **Read**: `/tmp/cursor_automation/ORCHESTRATOR.md`
2. **Execute**: Start with prompt 01 in Cursor
3. **Verify**: Run verification scripts after each batch
4. **Report**: Generate final report when complete

---

## 📞 Support

For issues or questions:
1. Check ORCHESTRATOR.md troubleshooting section
2. Review prompt comments in `/prompts/` files
3. Run verification scripts to diagnose issues

---

**Ready to achieve 80%+ test coverage! 🎉**
